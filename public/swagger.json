{
  "swagger": "2.0",
  "info": {
    "description": "A plataforma Pagasó prevê a resposta a requisições no formato JSON, um formato compacto, de padrão aberto independente, para a troca de dados entre sistemas. Esta é a documentação da Pagasó API.",
    "version": "1.0.5",
    "title": "Pagasó API",
    "termsOfService": "https://www.pagaso.co.ao/pages/policies?locale=pt",
    "contact": {
      "email": "rosi.volgarin@tiv-tecnologia.com"
    }
  },
  "host": "localhost:3000",
  "tags": [
    {
      "name": "Recarga",
      "description": "Para compras de recarga"
    },
    {
      "name": "Usuarios",
      "description": "Para login e itens relacionados a usuários (distribuidor)"
    },
    {
      "name": "ContaCorrente",
      "description": "Para alterações em conta corrente"
    }
  ],
  "schemes": [
    "https",
    "http"
  ],
  "paths": {
    "/api/recarga/confirma/dstv.json": {
      "post": {
        "tags": [
          "Recarga"
        ],
        "description": "",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "transacao_smartcard",
            "description": "Se envio de transação é smartcard selecionar true, se for customer number, selectionar false",
            "required": true,
            "type": "boolean"
          },
          {
            "name": "produto_id",
            "description": "ID do produto",
            "required": true,
            "type": "string"
          },
          {
            "name": "valor",
            "description": "Valor de compra (KZ)",
            "required": true,
            "type": "number"
          },
          {
            "name": "dstv_number",
            "description": "DSTV customer number ou smartcard, caso seja uma recarga da DSTV, o fator decisório para smartcard ou customer number é o parâmetro transacao_smartcard",
            "required": true,
            "type": "string"
          },
          {
            "name": "talao_sms",
            "description": "Talão SMS, para envio da confirmação da recarga, caso o serviço esteja disponível",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/recarga"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/recarga/confirma/unitel.json": {
      "post": {
        "tags": [
          "Recarga"
        ],
        "description": "",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "produto_id",
            "description": "ID do produto",
            "required": true,
            "type": "string"
          },
          {
            "name": "valor",
            "description": "Valor de compra (KZ)",
            "required": true,
            "type": "number"
          },
          {
            "name": "unitel_telefone",
            "description": "Unitel Telefone, caso seja uma recarga da Unitel",
            "required": true,
            "type": "string"
          },
          {
            "name": "talao_sms",
            "description": "Talão SMS, para envio da confirmação da recarga, caso o serviço esteja disponível",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/recarga"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/recarga/confirma/movicel.json": {
      "post": {
        "tags": [
          "Recarga"
        ],
        "description": "",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "produto_id",
            "description": "ID do produto",
            "required": true,
            "type": "string"
          },
          {
            "name": "valor",
            "description": "Valor de compra (KZ)",
            "required": true,
            "type": "number"
          },
          {
            "name": "movicel_telefone",
            "description": "Telefone recarga, caso seja uma recarga da Movicel",
            "required": true,
            "type": "string"
          },
          {
            "name": "talao_sms",
            "description": "Talão SMS, para envio da confirmação da recarga, caso o serviço esteja disponível",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/recarga"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/recarga/confirma/zaptv.json": {
      "post": {
        "tags": [
          "Recarga"
        ],
        "description": "",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "produto_id",
            "description": "ID do produto",
            "required": true,
            "type": "string"
          },
          {
            "name": "valor",
            "description": "Valor de compra (KZ)",
            "required": true,
            "type": "number"
          },
          {
            "name": "zaptv_cartao",
            "description": "ZAP Cartão, caso seja uma recarga da ZAP",
            "required": true,
            "type": "string"
          },
          {
            "name": "talao_sms",
            "description": "Talão SMS, para envio da confirmação da recarga, caso o serviço esteja disponível",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/recarga"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/recarga/confirma/ende.json": {
      "post": {
        "tags": [
          "Recarga"
        ],
        "description": "",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "produto_id",
            "description": "ID do produto",
            "required": true,
            "type": "string"
          },
          {
            "name": "valor",
            "description": "Valor de compra (KZ)",
            "required": true,
            "type": "number"
          },
          {
            "name": "meter_number",
            "description": "Número do Medidor",
            "required": true,
            "type": "string"
          },
          {
            "name": "talao_sms_ende",
            "description": "Número SMS para envio do token de recarga",
            "required": true,
            "type": "string"
          },
          {
            "name": "email",
            "description": "E-mail para envio do token de recarga",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/recarga"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/recarga/dstv-produtos.json": {
      "get": {
        "tags": [
          "Recarga"
        ],
        "description": "Retorna produtos DSTV",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/produtos_dstv"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/recarga/unitel-produtos.json": {
      "get": {
        "tags": [
          "Recarga"
        ],
        "description": "Retorna produtos Unitel",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/produtos_dstv"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/recarga/movicel-produtos.json": {
      "get": {
        "tags": [
          "Recarga"
        ],
        "description": "Retorna produtos Movicel",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/produtos_recarga"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/recarga/zap-produtos.json": {
      "get": {
        "tags": [
          "Recarga"
        ],
        "description": "Retorna produtos ZAPTV",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/produtos_recarga"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/recarga/ende-produtos.json": {
      "get": {
        "tags": [
          "Recarga"
        ],
        "description": "Retorna produtos ENDE",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/produtos_recarga"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/login.json": {
      "post": {
        "tags": [
          "Usuarios"
        ],
        "description": "Login com usuário e senha",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "email",
            "description": "E-mail ou login para acesso",
            "required": true,
            "type": "string"
          },
          {
            "name": "senha",
            "description": "Palavra-passe de acesso",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/usuario"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/municipios.json": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "description": "Municípios para cadastro de usuários",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/objs_simples"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/provincias.json": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "description": "Províncias para cadastro de usuários",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/provincias"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/industries.json": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "description": "Municípios para cadastro de usuários",
        "produces": [
          "application/json"
        ],
        "parameters": [],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/industries"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/usuarios.json": {
      "post": {
        "tags": [
          "Usuarios"
        ],
        "description": "Cadastro de novo usuário",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "nome",
            "description": "Nome do usuário",
            "required": true,
            "type": "string"
          },
          {
            "name": "email",
            "description": "E-mail para login",
            "required": true,
            "type": "string"
          },
          {
            "name": "senha",
            "description": "Senha para login",
            "required": true,
            "type": "string"
          },
          {
            "name": "sub_agente_id",
            "description": "Id do subagente",
            "required": false,
            "type": "integer"
          },
          {
            "name": "status_cliente_id",
            "description": "Id do status do cliente",
            "required": false,
            "type": "integer"
          },
          {
            "name": "morada",
            "description": "morada",
            "required": false,
            "type": "string"
          },
          {
            "name": "bairro",
            "description": "bairro",
            "required": false,
            "type": "string"
          },
          {
            "name": "municipio_id",
            "description": "municipio_id",
            "required": false,
            "type": "integer"
          },
          {
            "name": "provincia_id",
            "description": "provincia_id",
            "required": false,
            "type": "integer"
          },
          {
            "name": "industry_id",
            "description": "industry_id",
            "required": false,
            "type": "integer"
          },
          {
            "name": "uni_pessoal_empresa_id",
            "description": "uni_pessoal_empresa_id",
            "required": false,
            "type": "integer"
          },
          {
            "name": "data_adesao",
            "description": "data_adesao",
            "required": false,
            "type": "string"
          },
          {
            "name": "telefone",
            "description": "telefone",
            "required": false,
            "type": "string"
          },
          {
            "name": "whatsapp",
            "description": "whatsapp",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/usuario_create"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha_usuario"
            }
          }
        }
      }
    },
    "/api/usuarios/{id}.json": {
      "get": {
        "tags": [
          "Usuarios"
        ],
        "description": "Mostra de novo usuário",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/usuario_create"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha_usuario"
            }
          }
        }
      }
    },
    "api/alegacao_de_pagamentos/criar.json": {
      "post": {
        "tags": [
          "AlegacaoPagamento"
        ],
        "description": "Manifestação de alegação de pagamento para posterior processamento e crédito em conta corrente",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "usuario_id",
            "description": "ID do Usuário responsável pela conta que receberá o crédito em conta corrente",
            "required": true,
            "type": "integer"
          },
          {
            "name": "valor_deposito",
            "description": "Valor do Depósito em Kz",
            "required": true,
            "type": "string"
          },
          {
            "name": "data_deposito",
            "description": "Data do efetivo depósito no formato 2022-11-08T16:37",
            "required": true,
            "type": "string"
          },
          {
            "name": "numero_talao",
            "description": "Número do Talão para Identificação do Depósito",
            "required": true,
            "type": "string"
          },
          {
            "name": "banco_id",
            "description": "Banco no qual o depósito foi efetuado, adotando os seguintes códigos: </br> 2-Banco Angolano de Investimentos, S.A. </br>4-Banco BIC, S.A. </br>  5-Banco Caixa Geral Angola, S.A. </br> 11-Banco de Fomento de Angola, S.A. </br> 16-Banco Económico </br> 17-Banco Sol S.A. </br> 18-Banco Atlantico </br> 19-Banco Keve",
            "required": true,
            "type": "string"
          },
          {
            "name": "comprovativo",
            "description": "Comprovativo de Pagamento - Imagem convertida para base64",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/alegacao_de_pagamento"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    },
    "/api/conta-corrente/extrato.json": {
      "get": {
        "tags": [
          "ContaCorrente"
        ],
        "description": "Retorna extrato do usuário incluindo o saldo atual",
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "page",
            "description": "Pagina corrente, paginação - Padrão (1)",
            "required": false,
            "type": "integer"
          },
          {
            "name": "data_alegacao_pagamento_inicio",
            "description": "Data de Lançamento Início",
            "required": false,
            "type": "string"
          },
          {
            "name": "data_alegacao_pagamento_fim",
            "description": "Data de Lançamento Fim",
            "required": false,
            "type": "string"
          },
          {
            "name": "data_ultima_atualizacao_saldo_inicio",
            "description": "Data da Última Atualiz. Início",
            "required": false,
            "type": "string"
          },
          {
            "name": "data_ultima_atualizacao_saldo_fim",
            "description": "Data da Última Atualiz. Fim",
            "required": false,
            "type": "string"
          },
          {
            "name": "nome",
            "description": "Nome do Usuário",
            "required": false,
            "type": "string"
          },
          {
            "name": "iban",
            "description": "IBAN ou Número do Talão",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Operação de sucesso",
            "schema": {
              "$ref": "#/definitions/conta_corrente_index"
            }
          },
          "401": {
            "description": "Ação não autorizada",
            "schema": {
              "$ref": "#/definitions/falha"
            }
          }
        }
      }
    }



  },
  "definitions": {
    "recarga": {
      "type": "object",
      "properties": {
        "mensagem": { "type": "string" },
        "status": { "type": "string" }
      }
    },
    "falha": {
      "type": "object",
      "properties": {
        "mensagem": { "type": "string" },
        "status": { "type": "string" }
      }
    },
    "falha_usuario": {
      "type": "object",
      "properties": {
        "mensagem": { "type": "string" }
      }
    },
    "usuario": {
      "type": "object",
      "properties": {
        "id": { "type": "integer" },
        "nome": { "type": "string" },
        "email": { "type": "string" },
        "updated_at": { "type": "string" },
        "token": { "type": "string" }
      }
    },
    "usuario_create": {
      "type": "object",
      "properties": {
        "id": { "type": "integer" },
        "nome": { "type": "string" },
        "email": { "type": "string" },
        "saldo": { "type": "string" },
        "data_saldo": { "type": "string" }
      }
    },
    "alegacao_de_pagamento": {
      "type": "object",
      "properties": {
        "id": { "type": "number" },
        "usuario_id": { "type": "number" },
        "valor_deposito": { "type": "number" },
        "data_deposito": { "type": "string" },
        "numero_talao": { "type": "string" },
        "banco_id": { "type": "number" },
        "comprovativo": { "type": "string" },
        "created_at": { "type": "string" }
      }
    },
    "conta_corrente": {
      "type": "object",
      "properties": {
        "usuario_id": { "type": "string" },
        "banco_nome": { "type": "string" },
        "valor": { "type": "number" },
        "iban": { "type": "string" },
        "data_alegacao_pagamento": { "type": "string" },
        "lancamento_nome": { "type": "string" },
        "saldo_anterior": { "type": "number" },
        "saldo_atual": { "type": "number" },
        "data_ultima_atualizacao_saldo": { "type": "string" }
      }
    },
    "conta_corrente_index": {
      "type" : "array",
      "items" : {
        "$ref" : "#/definitions/conta_corrente"
      }
    },
    "produtos_dstv": {
      "type" : "array",
      "items" : {
        "$ref" : "#/definitions/produto_dstv"
      }
    },
    "produtos_recarga": {
      "type" : "array",
      "items" : {
        "$ref" : "#/definitions/produto_recarga"
      }
    },
    "produto_recarga": {
      "type": "object",
      "properties": {
        "id": { "type": "integer" },
        "nome": { "type": "string" },
        "valor": { "type": "string" }
      }
    },
    "objs_simples": {
      "type" : "array",
      "items" : {
        "$ref" : "#/definitions/obj_simples"
      }
    },
    "obj_simples": {
      "type": "object",
      "properties": {
        "id": { "type": "integer" },
        "nome": { "type": "string" },
        "created_at": { "type": "string" },
        "updated_at": { "type": "string" }
      }
    },
    "provincias": {
      "type" : "array",
      "items" : {
        "$ref" : "#/definitions/provincia"
      }
    },
    "provincia": {
      "type": "object",
      "properties": {
        "id": { "type": "integer" },
        "nome": { "type": "string" },
        "capital": { "type": "string" },
        "area_km2": { "type": "string" },
        "population": { "type": "integer" },
        "image_map": { "type": "string" },
        "country_id": { "type": "integer" },
        "created_at": { "type": "string" },
        "updated_at": { "type": "string" }
      }
    },
    "industries": {
      "type" : "array",
      "items" : {
        "$ref" : "#/definitions/industry"
      }
    },
    "industry": {
      "type": "object",
      "properties": {
        "id": { "type": "integer" },
        "descricao_seccao": { "type": "string" },
        "descricao_divisao": { "type": "string" },
        "descricao_grupo": { "type": "string" },
        "created_at": { "type": "string" },
        "updated_at": { "type": "string" }
      }
    },
    "produto_dstv": {
      "type": "object",
      "properties": {
        "subtipo": { "type": "string" },
        "produtos": {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/produto_recarga"
          }
        }
      }
    }

  }
}