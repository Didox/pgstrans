<div class="card" style="margin-top: 5px;">
  <div class="card-header">
    <div class="col-md-6">
      Escolha um Parceiro/Fornecedor
    </div>
    <div class="col-md-6" style="text-align: right;font-weight: bold;">
      Saldo Disponível: <%= number_to_currency(usuario_logado.saldo, :unit => "KZ") %>
    </div>
  </div>
  <div class="card-body recarga">
    <div class="col-md-12 row justify-content-center mobile-container-icones">
      <% Partner.all.each_with_index do |partner, index| 
        if index == 0
          @partner_default = partner
          ativo = "menu-ativo"
        end %>
        <% if partner.status_parceiro_id == 1 %>
          <!--<%= partner.slug %>-->
          <div class="col-md-3 menu-icon" style="text-align: center;">
            <a href="javascript:;" onclick="pgstrans.displayRecarga('<%= partner.slug %>')">
              <%= image_tag("partner/#{partner.slug}_160x160c.png", alt: partner.slug, class: "img-responsive icone-menu #{ativo} img_#{partner.slug}", style: "display: inline-block;") rescue "" %>
            </a>
          </div>
        <% else %>
          <!--<%= partner.slug %>-->
          <div class="col-md-3 menu-icon" style="text-align: center;">
            <%= image_tag("partner/#{partner.slug}_160x160c.png", alt: partner.slug, class: "img-responsive icone-menu img_#{partner.slug}", style: "display: inline-block;") rescue "" %>
          </div>
        <% end %>
      <% end %>
    </div>
    <form action="<%= recarga_confirma_path %>" id="recargaForm" method="post">

      <div class="col-md-12" id="DSTVMenu" style="display: none;padding: 20px;box-shadow: 0px 0px 10px 5px #AAAAAA;border-radius: 10px;">
        <div style="background-color: #F2F3F4;padding: 10px;color: #000;">
          <h1>O que você deseja fazer ?</h1>
        </div>
        <div class="menuDSTV" style="padding: 20px">
          <ul>
            <li>
              <a href="/dstv/validacao-cliente">
                Validação de cliente e verificação de valor e data de vencimento
              </a>
            </li>
            <li>
              <a href="/dstv/alteracao-pacote">
                Alteração de pacote de produtos
              </a>
            </li>
            <li>
              <a href="/dstv/alteracao-plano">
                Alteração de plano de cobrança alternando entre mensal e anual
              </a>
            </li>
            <li>
              <a href="javascript:pgstrans.displayRecargaDstv()">
                Recarga ou pagamento
              </a>
            </li>
          </ul>
        </div>
      </div>

      <div class="col-md-12" id="recarga" style="display: none;padding: 20px;box-shadow: 0px 0px 10px 5px #AAAAAA;border-radius: 10px;">
        <div style="background-color: #F2F3F4;padding: 10px;color: #000;">
          <h1>Recargas</h1>
        </div>
        <div id="dialogRecharge" title="Recarga">
          <input type="hidden" id="tipo_ativo" name="tipo_venda">
          <div class="overlayLoading" id="recargas_RightMenuListItemOverlay"></div>
            <div class="dialogDiv" style="padding: 0px;margin-top: 15px;">
              <% Partner.where(status_parceiro_id: 1).each do |partner| %>
                <div class="campos <%= partner.slug %>">
                  <div class="editArea editAreaDiv" style="margin-bottom: 10px;">
                    <div class="p16Bold editDiv" style="text-align: left; width: 20% !important;">
                        Recarga<span class="required">&nbsp;*</span>
                    </div>
                    <div>
                      <select class="rechargeType form-control validate v<%= partner.slug %>" name="<%= partner.slug.downcase %>_produto_id" data-message="Selecione um produto">
                        <option value="" >Escolher</option>
                        <% Produto.where(partner_id: Partner.where(slug: partner.slug)).reorder("description asc").each do |produto| %>
                          <option value="<%= produto.produto_id_parceiro || produto.id %>-<%= produto.valor_minimo_venda_site %>">
                            <%= produto.description %>
                            <% if ["dstv", "zaptv"].include?(partner.slug.to_s.downcase) %>
                               - <%= number_to_currency(produto.valor_minimo_venda_site, :unit => "KZ") %>
                            <% end %>
                          </option>
                        <% end %>
                      </select>
                    </div>
                  </div>
                </div>
              <% end %>
              <div class="campos Unitel Movicel DSTv ZAPTv">
                <div class="editArea editAreaDiv" style="margin-bottom: 10px;">
                  <div class="p16Bold editDiv" style="text-align: left; width: 20% !important;">
                    Valor
                  </div>
                  <div class="number">
                    <input type="text" id="rechargeValue" class="form-control" name="valor" readonly="" placeholder="Valor...">
                  </div>
                </div>
              </div>
              <div class="campos Movicel " id="divAditionalFieldsMovicel">
                <div class="editArea editAreaDiv">
                  <div class="p16Bold editDiv" style="text-align: left; width: 20% !important;">
                    Telemóvel<span class="required">&nbsp;*</span>
                  </div>
                  <div>
                    <input type="text" name="movicel_telefone" class="form-control vMovicel validate" data-message="Informe o número" value="" placeholder="Telemóvel..." maxlength="20" onkeypress="return event.charCode >= 48 &amp;&amp; event.charCode <= 57">
                  </div>
                </div>
              </div>
              <div class="campos DSTv" id="divAditionalFieldsDSTV">
                <div class="editArea editAreaDiv">
                  <div class="p16Bold editDiv" style="text-align: left; width: 20% !important;">
                     Nº SmartCard <span class="required">&nbsp;*</span>
                  </div>
                  <div>
                    <input type="text" id="dstvNr"  name="dstv_smart_card" class="form-control vDSTv validate" data-message="Informe o número" value="" placeholder="Nº SmartCard..." maxlength="11" onkeypress="return event.charCode >= 48 &amp;&amp; event.charCode <= 57">
                  </div>
                </div>
              </div>
              <div class="campos ZAPTv" id="divAditionalFieldsZAP">
                <div class="editArea editAreaDiv">
                  <div class="p16Bold editDiv" style="text-align: left; width: 20% !important;">
                    Nº do Cartão ZAP <span class="required">&nbsp;*</span>
                  </div>
                  <div>
                    <input type="text" id="zapNr" name="zaptv_cartao" class="form-control vZAPTv validate" data-message="Informe o número" value="" placeholder="Nº do Cartão ZAP..." maxlength="12" onkeypress="return event.charCode >= 48 &amp;&amp; event.charCode <= 57">
                  </div>
                </div>
              </div>
              <div class="campos" id="divAditionalFieldsTELO">
                <div class="editArea editAreaDiv">
                  <div class="p16Bold editDiv" style="text-align: left; width: 20% !important;">
                    Nº Telo <span class="required">&nbsp;*</span>
                  </div>
                  <div>
                    <input type="text" id="teloNr" name="nr_telo" class="form-control validate" data-message="Informe o número" value="" placeholder="Nº Telo..." maxlength="20" onkeypress="return event.charCode >= 48 &amp;&amp; event.charCode <= 57">
                  </div>
                </div>
              </div>
              <div class="campos Unitel" id="divAditionalFieldsUnitel">
                <div class="editArea editAreaDiv">
                  <div class="p16Bold editDiv" style="text-align: left; width: 20% !important;">
                    Telemóvel <span class="required">*</span>
                  </div>
                  <div>
                    <input type="text" id="unitelNr" name="unitel_telefone" class="form-control vUnitel validate" data-message="Informe o número" value="" placeholder="Telemóvel..." maxlength="20" onkeypress="return event.charCode >= 48 &amp;&amp; event.charCode <= 57">
                  </div>
                </div>
              </div>
              <div class="campos talaoUnitel talaoMovicel talaoDSTv talaoZAPTv" id="divAditionalFieldsSMS" style="display: none;margin-top: 10px">
                <div class="editArea editAreaDiv">
                  <div class="p16Bold editDiv" style="text-align: left; width: 20% !important;">
                    Talão p/SMS <span class="required">&nbsp;*</span>
                  </div>
                  <div>
                    <input type="text" id="SMSNr" name="talao_sms" class="form-control talaoUnitel talaoMovicel talaoDSTv talaoZAPTv vUnitel vMovicel vDSTv vZAPTv validate" data-message="Informe o número" value="" placeholder="Talão p/SMS..." maxlength="20" onkeypress="return event.charCode >= 48 &amp;&amp; event.charCode <= 57">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="saveCancelbts" style="padding-top: 25px;padding-bottom: 25px;">
            <div style="float: right;">
              <input type="submit" class="btn btn-success" id="btSave" style="width: 210px; text-align: center;" value="SUBMETER PEDIDO">
            </div>
          </div>
        </div>
      </div>
      
    </form>
    <% if @partner_default.present? %>
      <script type="text/javascript">
        pgstrans.displayRecarga('<%= @partner_default.slug %>')
      </script>
    <% end %>
  </div>
</div>
<!-- para melhor controle de perfil de usuário optamos por separar o menu do backoffice
<%#= render 'layouts/backoffice' %>
